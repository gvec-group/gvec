# =================================================================================================================================
# Stage "publish" - generate documentation
# =================================================================================================================================

pages:
  stage: publish
  extends:
    - .tmpl_mpcdfci_intel2023
    - .tmpl_before_script_modules
    - .rules_pages
  variables:
    GIT_STRATEGY: clone
  script:
    - module load graphviz/2.44
    - zypper install -y urw-fonts
    - python -m venv venv
    - source venv/bin/activate
    - pip install ford setuptools_scm
    - export VERSION=$(python -m setuptools_scm)
    - ford docs/ford.md -o ../public -r "$VERSION"
  artifacts:
    paths:
      - public
  needs: []
